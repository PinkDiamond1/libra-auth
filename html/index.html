<!DOCTYPE html>
    <html>
    <head>
        <meta charset=utf-8>
        <meta name=viewport content="width=device-width, initial-scale=1">
        <title>Bob's Ticket Center</title>
        <link rel="stylesheet" href="./css/main.css?1">
        <style>

        </style>
        <script
            src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
        
    </head>
    <body>
        <header>
            <div id="btn-menu" style="position:absolute;top:12px;left:12px;">
                <nav>
                    <img src='./img/menu-icon-36.jpg'>
                    <div id="menu" style="display: none;"></div>
                </nav>
            </div>
        </header>
        <div id=contents>
            <section>
                <img class=logo alt="libra logo" src="./img/libra.png">
            </section>    
            <header>
                <div class=header>
                        <h2>Ticket Center Demo by libra-auth Method</h2>
                        Client and server authentication work sample for ticket application using the libra-auth method.
                </div>
            </header>    
            <nav>
                <div id=demo>
                    <h3>Demo</h3>
                        <li><strong>Buy ticket: </strong><br><a href=http://libra-auth.com/buy-ticket.html>http://libra-auth.com/buy-ticket.html</a></li>
                        <li><strong>Authenticate ticket: </strong><br><a href=https://libra-auth.com/auth-ticket.html>https://libra-auth.com/auth-ticket.html</a></li> 
                </div>
                <div id=github>
                    <h3>Document and Source</h3>
                        Github: <a href=https://github.com/toshirot/libra-auth>https://github.com/toshirot/libra-auth</a>
                </div>
            </nav>    
 
            <footer>
                <div id=info>
                    <aside>  
                    ●<p>  
                    Libra Auth is An authentication method using Libra's Public Key and Secret Key. 
                    </p>
                    <p>
                    Use a signature by EdDSA. In this Demo, User “ALICE” pays the ticket fee to Ticket Center “BOB” with Libra and is authenticated with the signature ticket.
                    </p>
                    
                    </aside>
                </div>
                <div id=powerd>
                    <nav>
                        powerd by <a href="https://github.com/toshirot/libra-auth">libra-auth method</a>
                    </nav>
                </div>
            </footer>
        </div>
        
    </body>

    <script>
//=============================================================================
// main object
// 
//-----------------------------------------------------------------------------

    //------------------------------------------------------------
    // Object for Ticket Demo with Libra Auth method
    //
    // Thanx: libraweb loaded by libraweb-v2.js is browserified 
    // bandifycol/libra-web and perfectmak/libra-core.
    // Alice's client is connected to proxy ac-libra-testnet.kulap.io in kulapio/libra-core.
    let Ticket={
         libraweb: window.libraweb//Hide from window later
        ,librawebBuffer: window.librawebBuffer//Hide from window later
        ,conn: {
            wss_arry: []
            ,wss: null
            ,wsNonStopFlg:true
        }//for WebSocket
        ,clickevt: 'ontouchstart' in window ? 'touchstart' : 'click'
    };

//=============================================================================
// data
// 
//-----------------------------------------------------------------------------

    //------------------------------------------------------------
    // for DOM

    //menu box
    const MENU_HTML=
        `<li><a href="./index.html">Home</a></li>
         <hr><li><a href="./buy-ticket.html">Buy Ticket</a></li>
         <hr><li><a href="./auth-ticket.html">Auth Ticket</a></li>
        `
//=============================================================================
// main 
// 
//-----------------------------------------------------------------------------

    // lets start
    main ()

    //------------------------------------------------------------
    // Works at onload
    function main (){
        //------------------------------------------------------------
        // set Event Menu Button
        setMenuButtonEvent()
    }

//=============================================================================
// Dom operations
// 
//-----------------------------------------------------------------------------

    //------------------------------------------------------------
    // pre) mk html
    // @targetElm {string} selector for jquery e.g. '#hoge'
    // @html {string} html
    function mkHtml(targetElm, html){
        return $(targetElm).html(html)
    }

//=============================================================================
// Dom Event operations
// 
//-----------------------------------------------------------------------------

    //------------------------------------------------------------
    // pre) Set Menu Event.
    //
    function setMenuButtonEvent(){
        $('#btn-menu').bind(Ticket.clickevt, function(){
            mkHtml('#menu', MENU_HTML).fadeToggle()
        })
    }
    </script>
</html>